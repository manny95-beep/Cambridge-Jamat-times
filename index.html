<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cambridge Jamat Times</title>
<style>
   body {
     font-family: Arial, sans-serif;
     background: #f8f9fa;
     color: #333;
     margin: 40px;
     text-align: center;
   }
   h1 {
     color: #006241;
     margin-bottom: 10px;
   }
   p {
     font-size: 18px;
     margin-bottom: 30px;
   }
   table {
     width: 100%;
     max-width: 700px;
     margin: 0 auto;
     border-collapse: collapse;
     background: white;
     box-shadow: 0 0 10px rgba(0,0,0,0.1);
   }
   th, td {
     padding: 12px;
     border: 1px solid #ddd;
   }
   th {
     background: #006241;
     color: white;
   }
   tr:nth-child(even) {
     background: #f2f2f2;
   }
</style>
</head>
<body>
<h1>Cambridge Jamat Times</h1>
<p id="today"></p>
<table id="times">
<thead>
<tr>
<th>Mosque</th>
<th>Fajr</th>
<th>Dhuhr</th>
<th>Asr</th>
<th>Maghrib</th>
<th>Isha</th>
</tr>
</thead>
<tbody>
<tr><td colspan="6">Loading today's jamat times...</td></tr>
</tbody>
</table>
<script>
   // 1. Display today's date
   const today = new Date();
   const todayStr = today.toLocaleDateString("en-GB"); // format: DD/MM/YYYY
   document.getElementById("today").textContent = `Today's Date: ${todayStr}`;
   // 2. Your Google Sheet CSV link
   const sheetUrl = "https://docs.google.com/spreadsheets/d/1dUXSVifdaugwxLGK1kG8a3r3Y-QWAJ1mB-JVnXsofXk/gviz/tq?tqx=out:csv";
   // 3. Fetch and display data
   fetch(sheetUrl)
     .then(res => res.text())
     .then(csv => {
       const rows = csv.split("\n").map(r => r.split(","));
       const tbody = document.querySelector("#times tbody");
       tbody.innerHTML = ""; // clear "loading" row
       let found = false;
       rows.slice(1).forEach(row => {
         const date = row[0]?.trim();
         if (date === todayStr) {
           const tr = document.createElement("tr");
           tr.innerHTML = `
<td>${row[1] || ""}</td>
<td>${row[2] || ""}</td>
<td>${row[3] || ""}</td>
<td>${row[4] || ""}</td>
<td>${row[5] || ""}</td>
<td>${row[6] || ""}</td>
           `;
           tbody.appendChild(tr);
           found = true;
         }
       });
       if (!found) {
         tbody.innerHTML = `<tr><td colspan="6">No jamat times found for today.</td></tr>`;
       }
     })
     .catch(err => {
       console.error("Error loading sheet:", err);
       document.querySelector("#times tbody").innerHTML = `<tr><td colspan="6">Error loading data.</td></tr>`;
     });
</script>
</body>
</html>
